<!DOCTYPE html>
<html>
	<head>
		<title>Movies</title>
		<base href="C:\Users\Admin\Desktop\WebProject\Webbased-Multimedia-Streaming\Movies\"></base>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="css\moviesHomepage.css">
		<script type="text/javascript" src="javascript\moviesHomepage.js"></script>
		<script src="https://fb.me/react-0.14.3.js"></script>
		<script src="https://fb.me/react-dom-0.14.3.js"></script>
		<script src="https://npmcdn.com/babel-core@5.8.38/browser.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	</head>
	<body>
		<div id="navBar">
			<script type="text/babel">

				var NavBarOption = React.createClass({
					getInitialState:function(){
						return{active:false}
					},
					toggle:function(){
						this.setState({active: !this.state.active});
					},
					activeOption:function(){
						return(
							<div>
								<div className="optionActive" onClick={this.toggle}>{this.props.children}</div>
								<hr/>
							</div>
							);
					},
					inactiveOption:function(){
						return(
							<div>
								<div className="optionInActive" onClick={this.toggle} defaultActive={this.state.active}>{this.props.children}</div>
								<hr/>
							</div>
							);
					},
					render:function(){
						if(this.state.active){
							return(this.activeOption())
						}
						else{
							return(this.inactiveOption())
						}
					}
				});

				var NavBar = React.createClass({
					getInitialState:function(){
						return{
							optionArray:[
								"Action",
								"Adventure",
								"Comedy",
								"Crime",
								"Documentary",
								"Drama",
								"Fantasy",
								"Horror",
								"Mistery",
								"Romance"
							]
						};
					},
					render:function(){
						return(
									<div className="navBarOption" style={{"paddingTop":"5px"}}>
										{
											this.state.optionArray.map(function(optionName,i){
												return(<NavBarOption key={i} index={i}>{optionName}</NavBarOption>)
											})
										}
									</div>
								)
					}
				});

				ReactDOM.render(<NavBar/>,document.getElementById("navBar"));
			</script>
		</div>

		<div id="topId" class="top">

			<script type="text/babel">

				var MenuIcon = React.createClass({
					getInitialState:function(){
						return{clicked:false}
					},
					toggle:function(){
						this.setState({clicked: !this.state.clicked});
						if(this.state.clicked){
							document.getElementById("navBar").style.width = "250px";
    						document.getElementById("main").style.marginLeft = "250px";
    						document.getElementById("main").style.transition = "0.5s";
    						$(document).find(".card").animate({"left":"+=200px"},"slow");
						}
						else{
							document.getElementById("navBar").style.width = "0px";
    						document.getElementById("main").style.marginLeft = "0px";
    						document.getElementById("main").style.transition = "0.5s";
    						$(document).find(".card").animate({"left":"-=200px"},"slow");
						}
					},
					render:function(){
						return(
							<div className="openCloseNavBar" title="Menu" align="center" onClick={this.toggle} defaultClicked={this.state.clicked}>
								<img src="images\\bars.png" alt="menu" style={{"margin":"17px"}}/>
							</div>
							);
					}
				});

				ReactDOM.render(<MenuIcon/>,document.getElementById("topId"));

			</script>
		</div>

		<div id="main" style="margin-left:200px; margin-top:100px">

			<div id="sectionId" class="section" style="width:100% ;height:415px; " align=center>
			</div>

			<script type="text/babel">

					var urls = [
							"https://cover.djpunjab.com/38823/300x700/Ae-Dil-Hai-Mushkil-Arijit-Singh.jpg",
							"http://www.lyricsted.com/wp-content/uploads/2016/12/naina-lyrics-dangal-movie-arijit-singh-song.jpg",
							"https://s-media-cache-ak0.pinimg.com/originals/d6/42/ef/d642ef875d1c2030ede51e81c49e553c.jpg",
							"http://www.justiceleaguethemovie.com/img/gallery/img01.jpg",
							"http://thesource.com/wp-content/uploads/2017/06/00000000Transformers-The-Last-Knight-Poster.jpg",
							"http://www.cinejosh.com/newsimg/newsmainimg/bahubali-maa-tv-premieres-on-october-25_b_2909150516.jpg",
							"https://upload.wikimedia.org/wikipedia/en/8/87/Jolly_LLB_2_Cover.jpg",
							"https://s-media-cache-ak0.pinimg.com/originals/56/32/d0/5632d04e75c90a9dc3ad6610da5a4b61.jpg"
					];

					var timer,timeout;


					var BackButton = React.createClass({
						moveBack:function(){
							clearInterval(timer);
							$(document).find(".card").animate({"left":"-=1200px"},"slow");
							timeout = setTimeout(function(){
								clearTimeout(timeout);
								timer = setInterval(function(){
									$(".card").animate({"left":"+=-300px"},"slow");
								},2000);	
							},5000);
						},
						render:function(){
							return(
								<div id="back" className="arrows" onClick={this.moveBack} title="Back" alt="Back">
									<img src={"http://www.sr-electronics.com/images/icon-prev.png"} alt="back"/>
								</div>);
						}
					});

					var NextButton = React.createClass({
						moveFoward:function(){
							clearInterval(timer);
							$(document).find(".card").animate({"left":"+=1200px"},"slow");
							timeout = setTimeout(function(){
								clearTimeout(timeout);
								timer = setInterval(function(){
									$(".card").animate({"left":"+=-300px"},"slow");
								},2000);	
							},5000);
						},
						render:function(){
							return(
								<div id="next" className="arrows" onClick={this.moveFoward} title="Next" alt="Next">
									<img src={"http://sociales.tv/imagenes/icon-next.png"} alt="next"/>
								</div>);
						}
					});


				 	var MovieCard  = React.createClass({
				 		render:function(){
				 			return(
				 					<div className="card" style={{"width":"280px" ,"height":"320px","position":"absolute","left":this.props.index*300+200}}>
										<div className="card_image" style={{"width":"100%" , "height":"80%"}}>
											<img src={this.props.imageUrl} alt="Movie Image" style={{"width":"100%" , "height":"100%"}}/>
										</div>
										<div className="card_content" style={{"width":"100%" , "height":"80%"}}>					
											<div className="description" style={{"width":"100%" , "height":"80%","fontSize" : "100%"}}>
												<h3 id="movie_name"><b>{this.props.movieName}</b></h3>
											</div>
										</div>
									</div>
				 				);
				 			}
				 		});

				 	var MovieSection = React.createClass({
				 		getInitialState:function(){
				 			return{
				 				movieNameArray: [
				 					"Ae Dil Hai Mushkil",
				 					"Dangal",
				 					"Spiderman Homecoming",
				 					"Justice League",
				 					"Transformers",
				 					"Bahubali",
				 					"Jolly LLB 2",
				 					"Batman Vs Superman"
				 				]
				 			}
				 		},
				 		render:function(){
				 			return(
				 				<div className="movieSection">
				 					<BackButton/>
				 					<NextButton/>
				 					{
				 						this.state.movieNameArray.map(function(name, i){
				 							return(<MovieCard key={i} refs="movieCard" index={i} movieName={name} imageUrl={urls[i]}/>)
				 						})
				 					}	
				 				</div>
				 				);
				 		}
				 	});

					ReactDOM.render(<MovieSection/>,document.getElementById('sectionId'));

					//Function for automatic slide in 2sec
					$(window).on("load",function(){
							timer = setInterval(function(){
								$(".card").animate({"left":"+=-300px"},"slow");
							},2000);
					});

					$("#sectionId")
						.mouseover(function(){
							clearInterval(timer);
							clearTimeout(timeout);
						})
						.mouseout(function(){
							timer = setInterval(function(){
								$(".card").animate({"left":"+=-300px"},"slow");
							},2000);	
						});
			</script>
		</div>

	</body>
</html>